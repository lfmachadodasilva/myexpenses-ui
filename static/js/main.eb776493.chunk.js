(this.webpackJsonpmyexpenses=this.webpackJsonpmyexpenses||[]).push([[0],{208:function(e){e.exports=JSON.parse('{"HEADER":{"TITLE":"MyExpenses","GROUPS":"Groups","LABELS":"Labels","EXPENSES":"Expenses","SETTINGS":"Settings","LOGOUT":"Logout","LOGIN_REGISTER":"Login/Register"},"AUTH":{"EMAIL":"Email","PASSWORD":"Password","FACEBOOK":{"BUTTON":"Facebook"},"LOGIN":{"TITLE":"Login by email","BUTTON":"Login"},"REGISTER":{"TITLE":"Register by email","BUTTON":"Register"},"RESET":{"TITLE":"Reset password","BUTTON":"Reset"}},"GROUPS":{"LIST":{"TITLE":"Show all groups"},"MANAGE":{"ADD":{"TITLE":"Add new group"},"EDIT":{"TITLE":"Edit group"},"USERS":"Users"}},"LABELS":{"LIST":{"TITLE":"Show all labels","CURRENT_VALUE":"Value","LAST_VALUE":"Last Month","AVERAGE_VALUE":"Average","ITEMS_TAB":"Items","GRAPH_TAB":"Graph"},"MANAGE":{"ADD":{"TITLE":"Add new label"},"EDIT":{"TITLE":"Edit label"}}},"EXPENSES":{"LIST":{"TITLE":"Show all expenses","TOTAL":"Total","TOTAL_INCOMING":"Total incoming","TOTAL_OUTCOMING":"Total outcoming","TOTAL_LEFT":"Total left"},"MANAGE":{"ADD":{"TITLE":"Add new expense"},"EDIT":{"TITLE":"Edit expense"},"TYPE":"Type","LABEL":"Label","VALUE":"Value","DATE":"Date","COMMENTS":"Comments"},"INCOMING":"Incoming","OUTCOMING":"Outcoming"},"SETTINGS":{"DISPLAY_NAME":"Display name","EMAIL":"Email","DARK_THEME":"Dark theme","BUTTON":"Update"},"SEARCH":{"TITLE":"Search","BUTTON":"Search","MONTHS":{"1":"January","2":"February","3":"March","4":"April","5":"May","6":"June","7":"July","8":"August","9":"September","10":"October","11":"November","12":"December"},"GROUP":"Group","YEAR":"Year","MONTH":"Month"},"COMMON":{"DATE_FORMAT":"dd/MM/yy","YOU":"You","SUMMARY":"Summary","NAME":"Name","ADD":"Add","EDIT":"Edit","ERROR_TITLE":"Error","ERROR":"An error occurred. Please try again later.","INFO_TITLE":"Info","EMPTY":"Empty list. Please create new item."}}')},252:function(e,t,a){e.exports=a(397)},259:function(e,t,a){},304:function(e,t,a){},397:function(e,t,a){"use strict";a.r(t);var n=a(77),r=a(0),c=a.n(r),l=a(18),i=a.n(l),o=a(53),u=a.n(o),s=(a(259),a(166)),m=a(102),p={en:{translation:a(208)}};s.a.use(m.e).init({resources:p,lng:"en",fallbackLng:"en",interpolation:{escapeValue:!1}});s.a;var E,d=a(6),f=a(153),b=a(54),h=a.n(b),O=a(450),g=a(498),v=a(223),j=a(489),y=a(490),S=a(472),T=a(454),k=a(8),A=a.n(k),C=a(11),w=a(37),x=a(17),N=a(497),I=a(499),L=a(225),M=a(460),R=a(461),U=a(462),D=a(463),G=a(453),F=a(455),B=a(55),P=a(456),V=a(227),z=a(459),_=a(400),H=a(494),W=a(158),Y=a.n(W),X=a(213),q=a.n(X),J=a(212),K=a.n(J),Q=a(157),Z=a.n(Q),$=a(98),ee=a.n($),te=a(99),ae=a.n(te),ne=a(160),re=a.n(ne),ce=a(159),le=a.n(ce),ie=c.a.createContext({user:null,initialising:!1,isReady:!1,isDarkTheme:!0,setDarkTheme:function(e){}}),oe=function(e){return null!==e&&void 0!==e&&("string"!==typeof e&&!Array.isArray(e)||e.length>0)},ue=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.find((function(e){return oe(e)}))},se=(a(277),a(33)),me=a(44),pe=a(72),Ee=a(70);!function(e){e[e.OK=200]="OK"}(E||(E={}));var de=function(){var e=Object(C.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.response&&t.response.status>=E.OK&&(console.error("Request Failed:",t.config),console.error("Status:",t.response.status),console.error("Data:",t.response.data),console.error("Headers:",t.response.headers)),e.abrupt("return",Promise.reject(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=function(){function e(t){Object(se.a)(this,e),this.config=t}return Object(me.a)(e,[{key:"get",value:function(){var e=Object(C.a)(A.a.mark((function e(t,a){var n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get(t,{baseURL:this.config.apiUrl,withCredentials:!0,headers:{Accept:"application/json; charset=utf=8",Authorization:"Bearer "+h.a.defaults.headers.common.Authorization},params:a});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",de(e.t0));case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(C.a)(A.a.mark((function e(t,a,n){var r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post(t,n,{baseURL:this.config.apiUrl,withCredentials:!0,headers:{Accept:"application/json; charset=utf=8",Authorization:"Bearer "+h.a.defaults.headers.common.Authorization},params:a});case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",de(e.t0));case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Object(C.a)(A.a.mark((function e(t,a,n){var r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.put(t,n,{baseURL:this.config.apiUrl,withCredentials:!0,headers:{Accept:"application/json; charset=utf=8",Authorization:"Bearer "+h.a.defaults.headers.common.Authorization},params:a});case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",de(e.t0));case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(C.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.delete(t,{baseURL:this.config.apiUrl,withCredentials:!0,headers:{Accept:"application/json; charset=utf=8",Authorization:"Bearer "+h.a.defaults.headers.common.Authorization}});case 3:return a=e.sent,e.abrupt("return",a.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",de(e.t0));case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),be=function(e){Object(pe.a)(a,e);var t=Object(Ee.a)(a);function a(e){var n;return Object(se.a)(this,a),(n=t.call(this,e)).config=e,n}return Object(me.a)(a,[{key:"getAll",value:function(){var e=Object(C.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/api/user");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addOrUpdate",value:function(){var e=Object(C.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/api/user",{},t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),a}(fe),he=function e(){Object(se.a)(this,e),this.apiUrl="https://myexpenses-backend-dev.herokuapp.com",this.buildVersion="local"},Oe=a(154),ge=a.n(Oe),ve=function(){function e(){Object(se.a)(this,e)}return Object(me.a)(e,null,[{key:"get",value:function(){var e=ge.a.get("ApplicationConfiguration"),t=new he;return Object.assign(t,e),t}}]),e}();ve.set=function(e){ge.a.set({ApplicationConfiguration:e},{freeze:!1})};var je=new o.auth.FacebookAuthProvider,ye=function(){var e=Object(C.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.auth().signInWithPopup(je);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),console.error(e.t0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),Se=function(){var e=Object(C.a)(A.a.mark((function e(t,a){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.auth().signInWithEmailAndPassword(t,a);case 3:e.next=9;break;case 5:throw e.prev=5,e.t0=e.catch(0),console.error(e.t0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,a){return e.apply(this,arguments)}}(),Te=function(){var e=Object(C.a)(A.a.mark((function e(t,a){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.auth().createUserWithEmailAndPassword(t,a);case 3:e.next=9;break;case 5:throw e.prev=5,e.t0=e.catch(0),console.error(e.t0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,a){return e.apply(this,arguments)}}(),ke=function(){var e=Object(C.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.auth().sendPasswordResetEmail(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),console.error(e.t0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(C.a)(A.a.mark((function e(t,a){var n,r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===t||void 0===t?void 0:t.updateProfile({displayName:a});case 3:return n=ve.get(),r=t,e.next=7,new be(n).addOrUpdate({id:r.uid,email:r.email,displayName:r.displayName,photoUrl:r.photoURL});case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(0),console.error(e.t0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}(),Ce=function e(){Object(se.a)(this,e)};Ce.home="/",Ce.auth="/auth",Ce.settings="/settings",Ce.groups="/groups",Ce.labels="/labels",Ce.expenses="/expenses";var we,xe=Object(O.a)((function(e){var t;return{root:{flexGrow:1,display:"flex"},appBar:(t={zIndex:e.zIndex.drawer+999},Object(w.a)(t,e.breakpoints.up("sm"),{zIndex:e.zIndex.drawer}),Object(w.a)(t,"position","static"),t),title:{flexGrow:1,cursor:"pointer"},buttons:{color:"inherit"},menu:{paper:{width:240}},sectionMobile:Object(w.a)({display:"flex"},e.breakpoints.up("sm"),{display:"none"}),sectionDesktop:Object(w.a)({display:"none"},e.breakpoints.up("sm"),{display:"flex"}),drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerContainer:{overflow:"auto"},container:{padding:0},small:{width:e.spacing(3),height:e.spacing(3)}}})),Ne=Object(r.memo)((function(){var e,t,a,n=Object(r.useContext)(ie).user,l=Object(x.g)(),i=Object(x.h)(),o=Object(N.a)(),s=Object(d.a)(o,1)[0],m=Object(r.useState)(!1),p=Object(d.a)(m,2),E=p[0],f=p[1],b=xe(),h=Object(r.useState)(null),O=Object(d.a)(h,2),g=O[0],v=O[1],j=Object(r.useCallback)((function(){v(null)}),[]),y=Object(r.useCallback)((function(){f(!E)}),[E]),S=Object(r.useCallback)((function(){f(!1),v(null),l.push(Ce.home)}),[l]),k=Object(r.useCallback)((function(){f(!1),v(null),l.push(Ce.groups)}),[l]),w=Object(r.useCallback)((function(){f(!1),v(null),oe(i.search)?l.push({pathname:Ce.labels,search:i.search}):l.push(Ce.labels)}),[l,i]),W=Object(r.useCallback)((function(){f(!1),v(null),oe(i.search)?l.push({pathname:Ce.expenses,search:i.search}):l.push(Ce.expenses)}),[l,i]),X=Object(r.useCallback)((function(){f(!1),v(null),l.push(Ce.settings)}),[l]),J=Object(r.useCallback)((function(){f(!1),v(null),l.push(Ce.auth)}),[l]),Q=Object(r.useCallback)(Object(C.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(null),f(!1),e.next=4,u.a.auth().signOut();case 4:setTimeout((function(){return l.push(Ce.home)}));case 5:case"end":return e.stop()}}),e)}))),[l]),$=null!==(e=null===n||void 0===n?void 0:n.email)&&void 0!==e?e:"",te=null!==(t=null===n||void 0===n?void 0:n.displayName)&&void 0!==t?t:"",ne=null!==(a=null===n||void 0===n?void 0:n.photoURL)&&void 0!==a?a:"",ce=Object(r.useMemo)((function(){return oe(ne)?c.a.createElement(I.a,{alt:$,src:ne,className:b.small}):c.a.createElement(Z.a,null)}),[b.small,$,ne]),ue=Object(r.useMemo)((function(){return oe(te)?te.split(" ")[0]:$}),[te,$]);return c.a.createElement("div",{className:b.root},c.a.createElement(G.a,{className:b.appBar},c.a.createElement(T.a,{maxWidth:"md",className:b.container},c.a.createElement(F.a,null,c.a.createElement(V.a,{edge:"start",color:"inherit","aria-label":"menu",className:b.sectionMobile,onClick:y},c.a.createElement(K.a,null)),c.a.createElement(B.a,{variant:"h6",className:b.title,onClick:S},s("HEADER.TITLE")),c.a.createElement("div",{className:b.sectionDesktop},c.a.createElement(P.a,{className:b.buttons,size:"small",onClick:k,startIcon:c.a.createElement(Y.a,null)},s("HEADER.GROUPS")),c.a.createElement(P.a,{className:b.buttons,size:"small",onClick:w,startIcon:c.a.createElement(ee.a,null)},s("HEADER.LABELS")),c.a.createElement(P.a,{className:b.buttons,size:"small",onClick:W,startIcon:c.a.createElement(ae.a,null)},s("HEADER.EXPENSES")),c.a.createElement(V.a,{"data-testid":"avatar-element",edge:"end","aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",onClick:function(e){oe(n)?v(e.currentTarget):(v(null),J())},color:"inherit"},ce),c.a.createElement(L.a,{"data-testid":"avatar-menu-element",id:"simple-menu",anchorEl:g,keepMounted:!0,open:Boolean(g),onClose:j},c.a.createElement(M.a,{onClick:j},c.a.createElement(R.a,null,ce),c.a.createElement(U.a,{primary:ue})),c.a.createElement(M.a,{onClick:X},c.a.createElement(R.a,null,c.a.createElement(le.a,{fontSize:"small"})),c.a.createElement(U.a,{primary:s("HEADER.SETTINGS")})),c.a.createElement(D.a,null),c.a.createElement(M.a,{onClick:Q},c.a.createElement(R.a,null,c.a.createElement(re.a,{fontSize:"small"})),c.a.createElement(U.a,{primary:s("HEADER.LOGOUT")}))))))),c.a.createElement(H.a,{className:b.drawer.concat(b.sectionMobile),open:E,classes:{paper:b.drawerPaper},onClose:function(){return f(!1)},onOpen:function(){return f(!0)}},c.a.createElement(F.a,null),c.a.createElement("div",{className:b.drawerContainer},c.a.createElement(z.a,null,c.a.createElement(_.a,{button:!0,key:"home"},c.a.createElement(R.a,null,c.a.createElement(q.a,null)),c.a.createElement(U.a,{primary:"Home",onClick:S})),c.a.createElement(D.a,null),c.a.createElement(_.a,{button:!0,key:"groups",onClick:k},c.a.createElement(R.a,null,c.a.createElement(Y.a,null)),c.a.createElement(U.a,{primary:s("HEADER.GROUPS")})),c.a.createElement(_.a,{button:!0,key:"labels",onClick:w},c.a.createElement(R.a,null,c.a.createElement(ee.a,null)),c.a.createElement(U.a,{primary:s("HEADER.LABELS")})),c.a.createElement(_.a,{button:!0,key:"expenses",onClick:W},c.a.createElement(R.a,null,c.a.createElement(ae.a,null)),c.a.createElement(U.a,{primary:s("HEADER.EXPENSES")}))),c.a.createElement(D.a,null),oe(n)&&c.a.createElement(z.a,null,c.a.createElement(_.a,{button:!0,key:"user"},c.a.createElement(R.a,null,ce),c.a.createElement(U.a,{primary:ue})),c.a.createElement(_.a,{button:!0,key:"logout",onClick:X},c.a.createElement(R.a,null,c.a.createElement(le.a,null)),c.a.createElement(U.a,{primary:s("HEADER.SETTINGS")})),c.a.createElement(_.a,{button:!0,key:"logout",onClick:Q},c.a.createElement(R.a,null,c.a.createElement(re.a,null)),c.a.createElement(U.a,{primary:s("HEADER.LOGOUT")}))),!oe(n)&&c.a.createElement(z.a,null,c.a.createElement(_.a,{button:!0,key:"login",onClick:J},c.a.createElement(R.a,null,c.a.createElement(Z.a,null)),c.a.createElement(U.a,{primary:s("HEADER.LOGIN_REGISTER")}))))))})),Ie=a(464),Le=a(466),Me=a(493),Re=a(465),Ue=a(467);!function(e){e[e.circular=0]="circular",e[e.linear=1]="linear"}(we||(we={}));var De,Ge=Object(O.a)((function(e){return Object(g.a)({linear:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}})})),Fe=Object(r.memo)((function(e){var t,a=Ge(),n=Object(N.a)(),r=Object(d.a)(n,1)[0];return oe(e.error)?c.a.createElement(Ie.a,{container:!0,justify:"center",alignItems:"center"},c.a.createElement(Me.a,{severity:"error"},c.a.createElement(Re.a,null,r("COMMON.ERROR_TITLE")),e.error)):oe(e.info)?c.a.createElement(Ie.a,{container:!0,justify:"center",alignItems:"center"},c.a.createElement(Me.a,{severity:"info"},c.a.createElement(Re.a,null,r("COMMON.INFO_TITLE")),e.info)):e.showLoading?c.a.createElement(Ie.a,{container:!0,justify:"center",alignItems:"center"},(!oe(e.type)||e.type===we.circular)&&c.a.createElement(Le.a,{size:null!==(t=e.size)&&void 0!==t?t:40,"data-testid":"loading-element"}),e.type===we.linear&&c.a.createElement("div",{className:a.linear},c.a.createElement(Ue.a,{"data-testid":"loading-element"}))):c.a.createElement(c.a.Fragment,null,e.children)})),Be=a(100),Pe=a.n(Be),Ve=function(e){Object(pe.a)(a,e);var t=Object(Ee.a)(a);function a(e){var n;return Object(se.a)(this,a),(n=t.call(this,e)).config=e,n.baseUrl="/api/group",n}return Object(me.a)(a,[{key:"getAll",value:function(){var e=Object(C.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get(this.baseUrl);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getFullAll",value:function(){var e=Object(C.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get(this.baseUrl+"/full");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Object(C.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post(this.baseUrl,{},t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(C.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.put(this.baseUrl,{},t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=Object(C.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.delete(this.baseUrl+"/"+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),a}(fe),ze=a(87),_e=function(e){var t=e.component;e.path,Object(ze.a)(e,["component","path"]);return Object(r.useContext)(ie).user?c.a.createElement(t,null):c.a.createElement(x.a,{to:"/auth"})},He=a(85),We=a.n(He),Ye=a(162),Xe=a.n(Ye),qe=a(161),Je=a.n(qe),Ke=a(468),Qe=a(214),Ze=a.n(Qe),$e=(a(304),Object(O.a)((function(e){return{cards:{flex:1},header:{padding:e.spacing(2),paddingBottom:0},content:{padding:e.spacing(2),"&:last-child":{paddingBottom:e.spacing(2)}},deleteButton:{marginLeft:e.spacing(3)},menu:{padding:0},moreButton:{padding:0},menuButton:{padding:0}}})));!function(e){e[e.Row=0]="Row",e[e.Column=1]="Column",e[e.Menu=2]="Menu"}(De||(De={}));var et,tt=c.a.memo((function(e){var t=$e(),a=c.a.useState(!1),n=Object(d.a)(a,2),r=n[0],l=n[1],i=c.a.useState(!1),o=Object(d.a)(i,2),u=o[0],s=o[1],m=c.a.useState(null),p=Object(d.a)(m,2),E=p[0],f=p[1],b=function(){f(null)},h=c.a.useCallback((function(){(b(),l(!0),oe(e.onEdit))&&(0,e.onEdit)(e.id).then((function(){})).finally((function(){return l(!1)}))}),[e]),O=c.a.useCallback((function(){(b(),s(!0),oe(e.onDelete))&&(0,e.onDelete)(e.id).then((function(){})).finally((function(){return s(!1)}))}),[e]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(_.a,{divider:!0,dense:!0,disableGutters:!0},c.a.createElement(U.a,{key:e.id,primary:e.title,secondary:e.children}),c.a.createElement(Ke.a,null,(oe(e.onEdit)||oe(e.onDelete))&&e.type===De.Menu&&c.a.createElement(c.a.Fragment,null,c.a.createElement(V.a,{onClick:function(e){f(e.currentTarget)},disableRipple:!0,className:t.moreButton},c.a.createElement(Ze.a,{fontSize:"inherit",className:t.moreButton})),c.a.createElement(L.a,{id:"simple-menu-"+e.id,anchorEl:E,keepMounted:!0,open:Boolean(E),onClose:b},oe(e.onEdit)&&c.a.createElement(M.a,{onClick:h},c.a.createElement(R.a,null,c.a.createElement(Je.a,{fontSize:"small"})),c.a.createElement(U.a,{primary:"Edit"})),oe(e.onDelete)&&c.a.createElement(M.a,{onClick:O},c.a.createElement(R.a,null,c.a.createElement(Xe.a,{fontSize:"small"})),c.a.createElement(U.a,{primary:"Delete"})))),oe(e.type)&&e.type!==De.Menu&&c.a.createElement(Ie.a,{container:!0,direction:e.type===De.Row?"row":"column",justify:"center",spacing:2},c.a.createElement(Ie.a,{item:!0},oe(e.onEdit)&&c.a.createElement(V.a,{size:"small",onClick:h,disabled:u},c.a.createElement(Fe,{showLoading:r,size:17},c.a.createElement(Je.a,{fontSize:"inherit","data-testid":"edit-element"})))),c.a.createElement(Ie.a,{item:!0},oe(e.onDelete)&&c.a.createElement(V.a,{size:"small",onClick:O,disabled:r},c.a.createElement(Fe,{showLoading:u,size:17},c.a.createElement(Xe.a,{fontSize:"inherit","data-testid":"delete-element"}))))))))})),at=a(474),nt=a(475),rt=a(501),ct=a(403),lt=a(4),it=a(23),ot=a(473),ut=a(469),st=a(470),mt=a(471),pt=a(101),Et=a.n(pt),dt=Object(lt.a)((function(e){var t,a;return Object(g.a)({root:(t={marginTop:50},Object(w.a)(t,e.breakpoints.up("sm"),{marginTop:0}),Object(w.a)(t,"padding",e.spacing(2)),t),closeButton:(a={marginTop:50},Object(w.a)(a,e.breakpoints.up("sm"),{marginTop:0}),Object(w.a)(a,"position","absolute"),Object(w.a)(a,"right",e.spacing(1)),Object(w.a)(a,"top",e.spacing(1)),Object(w.a)(a,"color",e.palette.grey[500]),a)})}))((function(e){var t=e.children,a=e.classes,n=e.onClose,r=Object(ze.a)(e,["children","classes","onClose"]);return c.a.createElement(ut.a,Object.assign({disableTypography:!0,className:a.root},r),c.a.createElement(B.a,{variant:"h6"},t),n?c.a.createElement(V.a,{"aria-label":"close",className:a.closeButton,onClick:n},c.a.createElement(Et.a,null)):null)})),ft=Object(lt.a)((function(e){return{root:{padding:e.spacing(2)}}}))(st.a),bt=Object(lt.a)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(mt.a),ht=c.a.memo((function(e){var t=Object(it.a)(),a=Object(N.a)(),n=Object(d.a)(a,1)[0],r=Object(S.a)(t.breakpoints.down("xs")),l=c.a.useState(!1),i=Object(d.a)(l,2),o=i[0],u=i[1],s=c.a.useState(""),m=Object(d.a)(s,2),p=m[0],E=m[1],f=c.a.useCallback((function(){e.onClose()}),[e]),b=c.a.useCallback((function(){u(!0),e.onAction().catch((function(){return E(n("COMMON.ERROR"))})).finally((function(){return u(!1)}))}),[e,n]);return c.a.useEffect((function(){E("")}),[e.show]),c.a.createElement(c.a.Fragment,null,c.a.createElement(ot.a,{fullScreen:r,open:e.show,onClose:f,"aria-labelledby":"responsive-dialog-title"},c.a.createElement(dt,{id:"responsive-dialog-title",onClose:f},e.title),c.a.createElement(ft,null,c.a.createElement(c.a.Fragment,null,oe(p)&&c.a.createElement(Me.a,{severity:"error"},p),e.children)),c.a.createElement(bt,null,c.a.createElement(P.a,{variant:"contained",autoFocus:!0,color:"primary",onClick:b,endIcon:o&&c.a.createElement(Le.a,{size:12}),startIcon:oe(p)&&c.a.createElement(Et.a,{color:"secondary"}),disabled:e.disableAction||o},e.actionText))))})),Ot=a(500),gt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e.id===t?a:oe(e.displayName)?e.displayName.split(" ")[0]:e.email.split("@")[0]},vt=Object(O.a)((function(){return{chip:{margin:2}}})),jt=Object(r.memo)((function(e){var t=vt(),a=Object(r.useContext)(ie).user,n=Object(N.a)(),l=Object(d.a)(n,1)[0];return c.a.createElement(Ot.a,{label:gt(e.user,null===a||void 0===a?void 0:a.uid,l("COMMON.YOU")),className:t.chip,avatar:c.a.createElement(I.a,{alt:e.user.email,src:e.user.photoUrl},gt(e.user)[0])})})),yt=Object(r.memo)((function(e){var t=Object(r.useContext)(ie).user,a=Object(N.a)(),n=Object(d.a)(a,1)[0];return c.a.createElement(c.a.Fragment,null,c.a.createElement(R.a,null,c.a.createElement(I.a,{alt:e.user.email,src:e.user.photoUrl},gt(e.user)[0])),c.a.createElement(U.a,{primary:gt(e.user,null===t||void 0===t?void 0:t.uid,n("COMMON.YOU")),secondary:e.user.email}))})),St=Object(O.a)((function(e){return Object(g.a)({formControl:{margin:e.spacing(1),minWidth:120,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)}})})),Tt={PaperProps:{style:{maxHeight:143,width:250}}},kt=c.a.memo((function(e){var t=c.a.useContext(ie).user,a=St(),n=Object(N.a)(),r=Object(d.a)(n,1)[0],l=c.a.useState(ve.get()),i=Object(d.a)(l,1)[0],o=c.a.useState(""),u=Object(d.a)(o,2),s=u[0],m=u[1],p=c.a.useState(""),E=Object(d.a)(p,2),f=E[0],b=E[1],h=c.a.useState(!1),O=Object(d.a)(h,2),g=O[0],v=O[1],j=c.a.useState(""),y=Object(d.a)(j,2),S=y[0],T=y[1],k=c.a.useState([]),w=Object(d.a)(k,2),x=w[0],I=w[1],L=c.a.useState(!1),R=Object(d.a)(L,2),U=R[0],D=R[1],G=c.a.useState([]),F=Object(d.a)(G,2),B=F[0],P=F[1],V=c.a.useState(""),z=Object(d.a)(V,2),_=z[0],H=z[1],W=c.a.useMemo((function(){return x.map((function(e){return e.id}))}),[x]),Y=c.a.useCallback((function(e){T(e.target.value)}),[]),X=c.a.useCallback((function(){v(!1),e.onClose()}),[e]),q=c.a.useCallback((function(e){var t=e.target.value.map((function(e){return B.find((function(t){return t.id===e}))}));I(t)}),[B]),J=c.a.useCallback(Object(C.a)(A.a.mark((function t(){var a;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!oe(e.group)){t.next=4;break}return t.abrupt("return",new Ve(i).update({id:null===(a=e.group)||void 0===a?void 0:a.id,name:S,users:x}).then((function(){e.onAction(),X()})));case 4:return t.abrupt("return",new Ve(i).add({id:0,name:S,users:x}).then((function(){e.onAction(),X()})));case 5:case"end":return t.stop()}}),t)}))),[e,S,x,i,X]),K=c.a.useMemo((function(){return B.map((function(e){return c.a.createElement(M.a,{key:"menu-".concat(e.id),value:e.id,disabled:e.id===(null===t||void 0===t?void 0:t.uid)},c.a.createElement(yt,{user:e}))}))}),[t,B]),Q=c.a.useCallback((function(e){return c.a.createElement("div",{className:a.chips},e.map((function(e){return c.a.createElement(jt,{key:"multiple-".concat(e),user:B.find((function(t){return t.id===e}))})})))}),[B,a.chips]);return c.a.useEffect((function(){if(v(e.show),e.show)if(e.show&&0===B.length&&(D(!0),new be(i).getAll().then((function(e){return P(e)})).catch((function(){return H(r("COMMON.ERROR"))})).finally((function(){return D(!1)}))),oe(e.group)){var a=e.group;T(a.name),I(a.users),m(r("GROUPS.MANAGE.EDIT.TITLE")),b(r("COMMON.EDIT"))}else T(""),oe(B)&&I([B.find((function(e){return e.id===(null===t||void 0===t?void 0:t.uid)}))]),m(r("GROUPS.MANAGE.ADD.TITLE")),b(r("COMMON.ADD"))}),[e,i,B,t,r]),c.a.createElement(c.a.Fragment,null,c.a.createElement(ht,{show:g,title:s,actionText:f,disableAction:!oe(S)||!oe(x)||U,onAction:J,onClose:X},c.a.createElement(Ie.a,{container:!0,spacing:3},c.a.createElement(Ie.a,{item:!0,xs:12},c.a.createElement(at.a,{fullWidth:!0},c.a.createElement(nt.a,{htmlFor:"name"},r("COMMON.NAME")),c.a.createElement(ct.a,{required:!0,id:"name",onChange:Y,value:S}))),c.a.createElement(Ie.a,{item:!0,xs:12},c.a.createElement(at.a,{fullWidth:!0},c.a.createElement(nt.a,{id:"mutiple-users-label"},r("GROUPS.MANAGE.USERS")),c.a.createElement(Fe,{showLoading:U,error:_},c.a.createElement(rt.a,{labelId:"mutiple-users-label",id:"users-mutiple-chip",multiple:!0,value:W,onChange:q,input:c.a.createElement(ct.a,{id:"select-multiple-chip"}),renderValue:function(e){return Q(e)},MenuProps:Tt},K)))))))})),At=Object(O.a)((function(e){return{root:{flexGrow:1,"&:last-child":{paddingBottom:e.spacing(2)}},title:{margin:e.spacing(2),marginLeft:0},list:{width:"100%"}}})),Ct=c.a.memo((function(){var e=c.a.useContext(ie).isReady,t=At(),a=Object(N.a)(),n=Object(d.a)(a,1)[0],r=c.a.useState(ve.get()),l=Object(d.a)(r,1)[0],i=c.a.useState([]),o=Object(d.a)(i,2),u=o[0],s=o[1],m=c.a.useState(!1),p=Object(d.a)(m,2),E=p[0],f=p[1],b=c.a.useState(!1),h=Object(d.a)(b,2),O=h[0],g=h[1],v=c.a.useState(),j=Object(d.a)(v,2),y=j[0],S=j[1],T=c.a.useState(!0),k=Object(d.a)(T,2),w=k[0],x=k[1],I=c.a.useState(""),L=Object(d.a)(I,2),M=L[0],R=L[1],U=c.a.useState(""),G=Object(d.a)(U,2),F=G[0],V=G[1],_=c.a.useCallback(function(){var e=Object(C.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(u.find((function(e){return e.id===t}))),g(!0),e.abrupt("return",Promise.resolve());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[u]),H=c.a.useCallback(function(){var e=Object(C.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Ve(l).remove(t).then((function(){x(!0)})).catch((function(){return R(n("COMMON.ERROR"))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l,n]),W=c.a.useCallback((function(){S(void 0),g(!0)}),[]),Y=c.a.useCallback((function(){x(!0),g(!1)}),[]),X=c.a.useCallback((function(){g(!1)}),[]);return c.a.useEffect((function(){e&&w&&(x(!1),R(""),V(""),f(!0),new Ve(l).getFullAll().then((function(e){s(e),0===e.length&&V(n("COMMON.EMPTY"))})).catch((function(){return R(n("COMMON.ERROR"))})).finally((function(){f(!1)})))}),[l,e,w,n]),c.a.createElement("div",{key:"GroupComponent"},c.a.createElement(Ie.a,{container:!0,justify:"space-between",alignItems:"center",className:t.root,spacing:1},c.a.createElement(B.a,{variant:"h5",className:t.title},n("GROUPS.LIST.TITLE")),c.a.createElement(P.a,{variant:"contained",color:"primary",startIcon:c.a.createElement(We.a,null),onClick:W},n("COMMON.ADD"))),c.a.createElement(Ie.a,{container:!0,justify:"flex-start",alignItems:"center",className:t.root,spacing:1},c.a.createElement(Fe,{showLoading:E||!e,error:M,info:F},c.a.createElement(z.a,{className:t.list},u.map((function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement(tt,{key:e.id,id:e.id,title:e.name,type:De.Menu,onEdit:_,onDelete:H},c.a.createElement(Ie.a,{container:!0,justify:"flex-start",alignItems:"center"},e.users.map((function(e){return c.a.createElement(jt,{key:"groups-page-".concat(e.id),user:e})})))),c.a.createElement(D.a,null))}))))),c.a.createElement(kt,{group:y,show:O,onAction:Y,onClose:X}))})),wt=c.a.createContext({isLoading:!1,groups:[],labels:[],years:[(new Date).getFullYear()],month:(new Date).getMonth(),year:(new Date).getFullYear()}),xt=a(216),Nt=(a(396),a(482)),It=a(504),Lt=a(492),Mt=a(139),Rt=a(480),Ut=a(503),Dt=a(163),Gt=a.n(Dt),Ft=a(164),Bt=a.n(Ft),Pt=a(165),Vt=a.n(Pt),zt=a(481),_t=a(219),Ht=a.n(_t),Wt=a(218),Yt=a.n(Wt),Xt=a(496),qt=a(478),Jt=a(477),Kt=a(479),Qt=a(215),Zt=Object(O.a)((function(e){return Object(g.a)({title:{maxWidth:180},formControl:{width:"100%"},details:{alignItems:"center"}})})),$t=Object(r.memo)((function(e){var t,a,n,r=Zt(),l=Object(x.g)(),i=Object(x.h)(),o=Object(N.a)(),u=Object(d.a)(o,1)[0],s=c.a.useState(!1),m=Object(d.a)(s,2),p=m[0],E=m[1],f=c.a.useState(null!==(t=e.groups)&&void 0!==t?t:[]),b=Object(d.a)(f,2),h=b[0],O=b[1],g=c.a.useState([1,2,3,4,5,6,7,8,9,10,11,12]),v=Object(d.a)(g,1)[0],j=c.a.useState(e.years),y=Object(d.a)(j,2),S=y[0],T=y[1],k=c.a.useState(null!==(a=null===(n=e.group)||void 0===n?void 0:n.id)&&void 0!==a?a:""),A=Object(d.a)(k,2),C=A[0],w=A[1],I=c.a.useMemo((function(){var e,t;return null!==(e=null===(t=h.find((function(e){return e.id===C})))||void 0===t?void 0:t.name)&&void 0!==e?e:""}),[h,C]),L=c.a.useState(e.month),M=Object(d.a)(L,2),R=M[0],U=M[1],G=c.a.useState(e.year),F=Object(d.a)(G,2),V=F[0],z=F[1],_=c.a.useMemo((function(){return h.map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.name)}))}),[h]),H=c.a.useMemo((function(){return v.map((function(e){return c.a.createElement("option",{key:e,value:e},u("SEARCH.MONTHS."+e))}))}),[v,u]),W=c.a.useMemo((function(){return S.map((function(e){return c.a.createElement("option",{key:e,value:e},e)}))}),[S]),Y=c.a.useCallback((function(e){w(e.target.value)}),[]),X=c.a.useCallback((function(e){U(e.target.value)}),[]),q=c.a.useCallback((function(e){z(e.target.value)}),[]),J=c.a.useCallback((function(e,t){E(t)}),[]),K=c.a.useCallback((function(){E(!1),l.push({pathname:i.pathname,search:Pe.a.stringify({group:C,month:R,year:V})})}),[l,i,C,R,V]);return c.a.useEffect((function(){var t,a;O(e.groups),T(e.years),w(null!==(t=null===(a=e.group)||void 0===a?void 0:a.id)&&void 0!==t?t:""),U(e.month),z(e.year)}),[e.groups,e.years,e.group,e.month,e.year]),c.a.createElement(c.a.Fragment,null,c.a.createElement(Xt.a,{onChange:J,disabled:e.loading,expanded:p},c.a.createElement(Jt.a,{expandIcon:c.a.createElement(Yt.a,{"data-testid":"expand-element"}),"aria-controls":"panel1c-content",id:"panel1c-header"},c.a.createElement(Fe,{showLoading:e.loading,size:25,type:we.linear},p&&c.a.createElement(B.a,{variant:"h6"},c.a.createElement("strong",null,u("SEARCH.TITLE"))),!p&&c.a.createElement(Ie.a,{container:!0,direction:"row",justify:"space-around",alignItems:"center"},c.a.createElement(B.a,{variant:"body1",noWrap:!0,className:r.title},I),c.a.createElement(D.a,{orientation:"vertical",flexItem:!0}),c.a.createElement(B.a,{variant:"body1"},u("SEARCH.MONTHS."+R)),c.a.createElement(D.a,{orientation:"vertical",flexItem:!0}),c.a.createElement(B.a,{variant:"body1"},V)))),c.a.createElement(qt.a,{className:r.details},c.a.createElement(Ie.a,{container:!0,justify:"center",spacing:2},c.a.createElement(Ie.a,{item:!0,xs:12,sm:4},c.a.createElement(at.a,{className:r.formControl},c.a.createElement(nt.a,{htmlFor:"group-select"},u("SEARCH.GROUP")),c.a.createElement(Qt.a,{id:"group-select",defaultValue:"",value:C,onChange:Y},_))),c.a.createElement(Ie.a,{item:!0,xs:12,sm:4},c.a.createElement(at.a,{className:r.formControl},c.a.createElement(nt.a,{htmlFor:"month-label"},u("SEARCH.MONTH")),c.a.createElement(Qt.a,{id:"month-select",defaultValue:"",value:R,onChange:X},H))),c.a.createElement(Ie.a,{item:!0,xs:12,sm:4},c.a.createElement(at.a,{className:r.formControl},c.a.createElement(nt.a,{htmlFor:"year-select"},u("SEARCH.YEAR")),c.a.createElement(Qt.a,{id:"year-select",defaultValue:"",value:V,onChange:q},W))))),c.a.createElement(D.a,null),c.a.createElement(Kt.a,null,c.a.createElement(P.a,{variant:"contained",color:"primary",startIcon:c.a.createElement(Ht.a,null),onClick:K},u("SEARCH.BUTTON")))))})),ea=function(e){Object(pe.a)(a,e);var t=Object(Ee.a)(a);function a(e){var n;return Object(se.a)(this,a),(n=t.call(this,e)).config=e,n.baseUrl="/api/label",n}return Object(me.a)(a,[{key:"getAll",value:function(){var e=Object(C.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get(this.baseUrl,{group:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFullAll",value:function(){var e=Object(C.a)(A.a.mark((function e(t,a,n){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get(this.baseUrl+"/full",{group:t,month:a,year:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Object(C.a)(A.a.mark((function e(t,a){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post(this.baseUrl,{group:t},a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(C.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.put(this.baseUrl,{},t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=Object(C.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.delete(this.baseUrl+"/"+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),a}(fe),ta=c.a.memo((function(e){var t=Object(N.a)(),a=Object(d.a)(t,1)[0],n=c.a.useContext(wt),r=c.a.useState(ve.get()),l=Object(d.a)(r,1)[0],i=c.a.useState(""),o=Object(d.a)(i,2),u=o[0],s=o[1],m=c.a.useState(""),p=Object(d.a)(m,2),E=p[0],f=p[1],b=c.a.useState(!1),h=Object(d.a)(b,2),O=h[0],g=h[1],v=c.a.useState(""),j=Object(d.a)(v,2),y=j[0],S=j[1],T=c.a.useCallback((function(e){S(e.target.value)}),[]),k=c.a.useCallback((function(){g(!1),e.onClose()}),[e]),w=c.a.useCallback(Object(C.a)(A.a.mark((function t(){var a,r;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!oe(e.label)){t.next=4;break}return t.abrupt("return",new ea(l).update({id:null===(a=e.label)||void 0===a?void 0:a.id,name:y}).then((function(){e.onAction(),k()})));case 4:return t.abrupt("return",new ea(l).add(null===(r=n.group)||void 0===r?void 0:r.id,{id:0,name:y}).then((function(){e.onAction(),k()})));case 5:case"end":return t.stop()}}),t)}))),[e,y,l,n.group,k]);return c.a.useEffect((function(){if(g(e.show),e.show)if(oe(e.label)){var t=e.label;S(t.name),s(a("LABELS.MANAGE.EDIT.TITLE")),f(a("COMMON.EDIT"))}else S(""),s(a("LABELS.MANAGE.ADD.TITLE")),f(a("COMMON.ADD"))}),[e,l,a]),c.a.createElement(c.a.Fragment,null,c.a.createElement(ht,{show:O,title:u,actionText:E,disableAction:!oe(y),onAction:w,onClose:k},c.a.createElement(Ie.a,{container:!0,spacing:3},c.a.createElement(Ie.a,{item:!0,xs:12},c.a.createElement(at.a,{fullWidth:!0},c.a.createElement(nt.a,{htmlFor:"name"},a("COMMON.NAME")),c.a.createElement(ct.a,{required:!0,id:"name",onChange:T,value:y}))))))}));function aa(e){var t=e.children,a=e.value,n=e.index,r=Object(ze.a)(e,["children","value","index"]);return c.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,id:"scrollable-auto-tabpanel-".concat(n),"aria-labelledby":"scrollable-auto-tab-".concat(n)},r),a===n&&c.a.createElement(c.a.Fragment,null,t))}!function(e){e[e.CURRENT_VALUE=0]="CURRENT_VALUE",e[e.LAST_VALUE=1]="LAST_VALUE",e[e.AVERAGE_VALUE=2]="AVERAGE_VALUE"}(et||(et={}));var na,ra=Object(O.a)((function(e){return{root:{flexGrow:1,"&:last-child":{paddingBottom:e.spacing(2)}},title:{margin:e.spacing(2),marginLeft:0},list:{width:"100%"},listValues:{flexGrow:1},gridItem:{marginTop:e.spacing(2)},badge:{},tab:{flexGrow:1},tabs:{flexGrow:1,width:"100%"},graphButtons:{marginTop:e.spacing(2),marginBottom:e.spacing(2)}}})),ca=c.a.memo((function(){var e=c.a.useContext(ie).isReady,t=c.a.useContext(wt),a=c.a.useState(ve.get()),n=Object(d.a)(a,1)[0],r=ra(),l=Object(N.a)(),i=Object(d.a)(l,1)[0],o=c.a.useState(!1),u=Object(d.a)(o,2),s=u[0],m=u[1],p=c.a.useState([]),E=Object(d.a)(p,2),f=E[0],b=E[1],h=c.a.useState(),O=Object(d.a)(h,2),g=O[0],v=O[1],j=c.a.useState(!0),y=Object(d.a)(j,2),S=y[0],T=y[1],k=c.a.useState(""),w=Object(d.a)(k,2),x=w[0],I=w[1],L=c.a.useState(""),M=Object(d.a)(L,2),R=M[0],U=M[1],G=c.a.useState(),F=Object(d.a)(G,2),V=F[0],_=F[1],H=c.a.useState(!1),W=Object(d.a)(H,2),Y=W[0],X=W[1],q=c.a.useState(0),J=Object(d.a)(q,2),K=J[0],Q=J[1],Z=c.a.useState(et.CURRENT_VALUE),$=Object(d.a)(Z,2),ee=$[0],te=$[1],ae=c.a.useCallback(function(){var e=Object(C.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(f.find((function(e){return e.id===t}))),X(!0),e.abrupt("return",Promise.resolve());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[f]),ne=c.a.useCallback(function(){var e=Object(C.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new ea(n).remove(t).then((function(){T(!S)})).catch((function(){return I(i("COMMON.ERROR"))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,S,i]),re=c.a.useCallback((function(){_(void 0),X(!0)}),[]),ce=c.a.useCallback((function(){T(!S),X(!1)}),[S]),le=c.a.useCallback((function(){X(!1)}),[]);c.a.useEffect((function(){var a;e&&!t.isLoading&&oe(t.group)&&(I(""),U(""),v(void 0),m(!0),new ea(n).getFullAll(null===(a=t.group)||void 0===a?void 0:a.id,t.month,t.year).then((function(e){b(e),v(e.length),0===e.length&&U(i("COMMON.EMPTY"))})).catch((function(){return I(i("COMMON.ERROR"))})).finally((function(){return m(!1)})))}),[e,n,S,i,t.isLoading,t.group,t.month,t.year]);var ue=c.a.useMemo((function(){return f.map((function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement(tt,{key:e.id,id:e.id,title:e.name,type:De.Menu,onEdit:ae,onDelete:ne},c.a.createElement(Ie.a,{container:!0,justify:"space-around",alignItems:"center",className:r.gridItem},c.a.createElement(Ut.a,{title:"Current value"},c.a.createElement(Ot.a,{icon:c.a.createElement(Gt.a,null),size:"small",label:e.currValue.toFixed(2),clickable:!0,color:e.currValue>=e.lastValue||e.currValue>=e.avgValue?"primary":"secondary"})),c.a.createElement(Ut.a,{title:"Last value","aria-label":"add"},c.a.createElement(Ot.a,{icon:c.a.createElement(Bt.a,null),size:"small",label:e.lastValue.toFixed(2),clickable:!0,color:e.lastValue>=e.avgValue?"primary":"secondary"})),c.a.createElement(Ut.a,{title:"Average value","aria-label":"add"},c.a.createElement(Ot.a,{icon:c.a.createElement(Vt.a,null),size:"small",label:e.avgValue.toFixed(2),clickable:!0,color:"primary"})))))}))}),[f,r.gridItem,ae,ne]),se=c.a.useMemo((function(){return 0===f.length?{labels:["Empty"],datasets:[{data:[1],borderWidth:0}]}:{labels:f.map((function(e){return e.name})),datasets:[{data:f.map((function(e){return ee===et.CURRENT_VALUE?e.currValue:ee===et.LAST_VALUE?e.lastValue:e.avgValue})),borderWidth:0}]}}),[f,ee]);return c.a.createElement("div",{key:"LabelComponent"},c.a.createElement($t,{loading:t.isLoading,groups:t.groups,years:t.years,group:t.group,month:t.month,year:t.year}),c.a.createElement(D.a,null),c.a.createElement(Ie.a,{container:!0,justify:"space-between",alignItems:"center",className:r.root,spacing:1},c.a.createElement(B.a,{variant:"h5",className:r.title},i("LABELS.LIST.TITLE")),c.a.createElement(P.a,{variant:"contained",color:"primary",startIcon:c.a.createElement(We.a,null),onClick:re,disabled:s||!e||t.isLoading},i("COMMON.ADD"))),c.a.createElement(Ie.a,{container:!0,justify:"flex-start",alignItems:"center",className:r.root,spacing:1},c.a.createElement(Fe,{showLoading:s||!e,error:x,info:R},c.a.createElement("div",{className:r.tabs},c.a.createElement(Mt.a,{className:r.tab},c.a.createElement(Lt.a,{value:K,onChange:function(e,t){Q(t)},centered:!0,variant:"fullWidth"},c.a.createElement(Rt.a,{label:c.a.createElement(zt.a,{badgeContent:g,color:"primary"},i("LABELS.LIST.ITEMS_TAB"))}),c.a.createElement(Rt.a,{label:i("LABELS.LIST.GRAPH_TAB")}))),c.a.createElement(aa,{value:K,index:0},c.a.createElement(z.a,{className:r.list},c.a.createElement(tt,{key:0,id:0},c.a.createElement(Ie.a,{container:!0,justify:"space-around",alignItems:"center",className:r.gridItem},c.a.createElement(B.a,{variant:"subtitle1"},i("LABELS.LIST.CURRENT_VALUE")),c.a.createElement(B.a,{variant:"subtitle1"},i("LABELS.LIST.LAST_VALUE")),c.a.createElement(B.a,{variant:"subtitle1"},i("LABELS.LIST.AVERAGE_VALUE")))),ue)),c.a.createElement(aa,{value:K,index:1},c.a.createElement(Ie.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},c.a.createElement(It.a,{size:"small",value:ee,exclusive:!0,onChange:function(e,t){te(+t)},className:r.graphButtons},c.a.createElement(Nt.a,{value:et.CURRENT_VALUE},c.a.createElement(Gt.a,null)," ",i("LABELS.LIST.CURRENT_VALUE")),c.a.createElement(Nt.a,{value:et.LAST_VALUE},c.a.createElement(Bt.a,null)," ",i("LABELS.LIST.LAST_VALUE")),c.a.createElement(Nt.a,{value:et.AVERAGE_VALUE},c.a.createElement(Vt.a,null)," ",i("LABELS.LIST.AVERAGE_VALUE"))),c.a.createElement(Ie.a,{item:!0,xs:12,sm:8,md:6},c.a.createElement(xt.a,{data:se,options:{plugins:{colorschemes:{scheme:"office.Excel16"}}},width:200,height:200}))))))),c.a.createElement(ta,{label:V,show:Y,onAction:ce,onClose:le}))})),la=a(224),ia=a(221),oa=a.n(ia);!function(e){e[e.Incoming=0]="Incoming",e[e.Outcoming=1]="Outcoming"}(na||(na={}));var ua,sa=function(e){Object(pe.a)(a,e);var t=Object(Ee.a)(a);function a(e){var n;return Object(se.a)(this,a),(n=t.call(this,e)).config=e,n.baseUrl="/api/expense",n}return Object(me.a)(a,[{key:"getAll",value:function(){var e=Object(C.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get(this.baseUrl);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getFullAll",value:function(){var e=Object(C.a)(A.a.mark((function e(t,a,n){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get(this.baseUrl+"/full",{group:t,month:a,year:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Object(C.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post(this.baseUrl,{},t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(C.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.put(this.baseUrl,{},t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=Object(C.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.delete(this.baseUrl+"/"+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),a}(fe),ma=a(34),pa=a(491),Ea=a(222),da=a(505),fa=a(483),ba=a(495),ha=a(402),Oa=Object(O.a)((function(e){return Object(g.a)({formControl:{width:"100%"}})})),ga=c.a.memo((function(e){var t=Object(N.a)(),a=Object(d.a)(t,1)[0],n=c.a.useContext(wt),r=Oa(),l=c.a.useState(ve.get()),i=Object(d.a)(l,1)[0],o=c.a.useState(""),u=Object(d.a)(o,2),s=u[0],m=u[1],p=c.a.useState(""),E=Object(d.a)(p,2),f=E[0],b=E[1],h=c.a.useState(!1),O=Object(d.a)(h,2),g=O[0],v=O[1],j=c.a.useState(""),y=Object(d.a)(j,2),S=y[0],T=y[1],k=c.a.useState(na.Outcoming),w=Object(d.a)(k,2),x=w[0],I=w[1],L=c.a.useState(),M=Object(d.a)(L,2),R=M[0],U=M[1],D=c.a.useState(""),G=Object(d.a)(D,2),F=G[0],B=G[1],P=c.a.useState(new Date),V=Object(d.a)(P,2),z=V[0],_=V[1],H=c.a.useState(),W=Object(d.a)(H,2),Y=W[0],X=W[1],q=c.a.useMemo((function(){if(!oe(F)&&n.labels.length>0){var t,a,r=localStorage.getItem("label");if(!oe(e.expense)&&oe(r)&&n.labels.some((function(e){return e.id===+r})))B(null===(t=n.labels[+r])||void 0===t?void 0:t.id.toString());else B(null===(a=n.labels[0])||void 0===a?void 0:a.id.toString())}return n.labels.map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.name)}))}),[n.labels,e.expense]),J=c.a.useCallback((function(e){B(e.target.value),localStorage.setItem("label",e.target.value)}),[]),K=c.a.useCallback((function(e){T(e.target.value)}),[]),Q=c.a.useCallback((function(e){0===+e.target.value?U(void 0):U(+e.target.value)}),[]),Z=c.a.useCallback((function(e){X(e.target.value)}),[]),$=c.a.useCallback((function(){v(!1),e.onClose()}),[e]),ee=c.a.useCallback(Object(C.a)(A.a.mark((function t(){var a,r,c;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!oe(e.expense)){t.next=4;break}return t.abrupt("return",new sa(i).update({id:null===(a=e.expense)||void 0===a?void 0:a.id,name:S,type:x,comments:Y,date:z,groupId:null===(r=n.group)||void 0===r?void 0:r.id,labelId:+F,value:R}).then((function(){e.onAction(),$()})));case 4:return t.abrupt("return",new sa(i).add({name:S,type:x,comments:Y,date:z,groupId:null===(c=n.group)||void 0===c?void 0:c.id,labelId:+F,value:R}).then((function(){e.onAction(),$()})));case 5:case"end":return t.stop()}}),t)}))),[e,x,z,F,S,R,Y,i,n.group,$]);return c.a.useEffect((function(){if(v(e.show),e.show)if(oe(e.expense)){var t=e.expense;I(t.type),_(t.date),T(t.name),U(t.value),X(t.comments),m(a("EXPENSES.MANAGE.EDIT.TITLE")),b(a("COMMON.EDIT"))}else I(na.Outcoming),_(new Date),T(""),U(void 0),X(""),m(a("EXPENSES.MANAGE.ADD.TITLE")),b(a("COMMON.ADD"))}),[e,i,a]),c.a.createElement(c.a.Fragment,null,c.a.createElement(ht,{show:g,title:s,actionText:f,disableAction:!oe(S)||!oe(R)||!oe(F),onAction:ee,onClose:$},c.a.createElement(Ie.a,{container:!0,spacing:2},c.a.createElement(Ie.a,{item:!0,xs:12},c.a.createElement(at.a,{component:"fieldset"},c.a.createElement(ha.a,{required:!0,component:"label"},a("EXPENSES.MANAGE.TYPE")),c.a.createElement(da.a,{"aria-label":"type",name:"type",value:x,onChange:function(e){I(+e.target.value)}},c.a.createElement(fa.a,{value:na.Incoming,control:c.a.createElement(ba.a,{size:"small"}),label:a("EXPENSES.INCOMING")}),c.a.createElement(fa.a,{value:na.Outcoming,control:c.a.createElement(ba.a,{size:"small"}),label:a("EXPENSES.OUTCOMING")})))),c.a.createElement(Ie.a,{item:!0,xs:12},c.a.createElement(ma.a,{utils:Ea.a},c.a.createElement(pa.a,{required:!0,autoOk:!0,format:"dd/MM/yyyy",label:a("EXPENSES.MANAGE.DATE"),value:z,onChange:function(e){_(e)}}))),c.a.createElement(Ie.a,{item:!0,xs:12},c.a.createElement(at.a,{fullWidth:!0},c.a.createElement(nt.a,{htmlFor:"name",required:!0},a("COMMON.NAME")),c.a.createElement(ct.a,{required:!0,id:"name",onChange:K,value:S}))),c.a.createElement(Ie.a,{item:!0,xs:12},c.a.createElement(at.a,{fullWidth:!0},c.a.createElement(nt.a,{htmlFor:"value",required:!0},a("EXPENSES.MANAGE.VALUE")),c.a.createElement(ct.a,{required:!0,type:"number",id:"value",onChange:Q,value:R}))),c.a.createElement(Ie.a,{item:!0,xs:12},c.a.createElement(at.a,{className:r.formControl},c.a.createElement(nt.a,{htmlFor:"label-select",required:!0},a("EXPENSES.MANAGE.LABEL")),c.a.createElement(Qt.a,{id:"label-select",value:F,onChange:J,disabled:n.isLoading},q))),c.a.createElement(Ie.a,{item:!0,xs:12},c.a.createElement(at.a,{fullWidth:!0},c.a.createElement(nt.a,{htmlFor:"comments"},a("EXPENSES.MANAGE.COMMENTS")),c.a.createElement(ct.a,{multiline:!0,id:"comments",onChange:Z,value:Y}))))))})),va=Object(O.a)((function(e){return{root:{flexGrow:1,"&:last-child":{paddingBottom:e.spacing(2)}},tab:{flexGrow:1},tabs:{flexGrow:1,width:"100%"},title:{margin:e.spacing(2),marginLeft:0},list:{width:"100%"},listValues:{flexGrow:1},separatorTitle:{margin:e.spacing(1)}}})),ja=c.a.memo((function(){var e=c.a.useContext(wt),t=c.a.useContext(ie).isReady,a=c.a.useState(ve.get()),n=Object(d.a)(a,1)[0],r=va(),l=Object(N.a)(),i=Object(d.a)(l,1)[0],o=c.a.useState(!1),u=Object(d.a)(o,2),s=u[0],m=u[1],p=c.a.useState([]),E=Object(d.a)(p,2),f=E[0],b=E[1],h=c.a.useState(!0),O=Object(d.a)(h,2),g=O[0],v=O[1],j=c.a.useState(""),y=Object(d.a)(j,2),S=y[0],T=y[1],k=c.a.useState(""),w=Object(d.a)(k,2),x=w[0],I=w[1],L=c.a.useState(),M=Object(d.a)(L,2),R=M[0],U=M[1],G=c.a.useState(!1),F=Object(d.a)(G,2),V=F[0],_=F[1],H=c.a.useState(0),W=Object(d.a)(H,2),Y=W[0],X=W[1],q=c.a.useCallback((function(e){return f.filter((function(t){return t.type===e})).reduce((function(e,t){return e+t.value}),0).toFixed(2)}),[f]),J=c.a.useCallback((function(e){return f.filter((function(t){return t.type===e})).length}),[f]),K=c.a.useMemo((function(){var e=+q(na.Incoming),t=e-+q(na.Outcoming);return[t.toFixed(2),(t/e*100).toFixed(0)]}),[q]),Q=Object(d.a)(K,2),Z=Q[0],$=Q[1],te=c.a.useCallback(function(){var e=Object(C.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U(f.find((function(e){return e.id===t}))),_(!0),e.abrupt("return",Promise.resolve());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[f]),ne=c.a.useCallback(function(){var e=Object(C.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new sa(n).remove(t).then((function(){v(!g)})).catch((function(){return T(i("COMMON.ERROR"))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,g,i]),re=c.a.useCallback((function(){U(void 0),_(!0)}),[]),ce=c.a.useCallback((function(){v(!g),_(!1)}),[g]),le=c.a.useCallback((function(){_(!1)}),[]);c.a.useEffect((function(){var a;t&&!e.isLoading&&oe(e.group)&&(T(""),I(""),m(!0),new sa(n).getFullAll(null===(a=e.group)||void 0===a?void 0:a.id,e.month,e.year).then((function(e){b(e),0===e.length&&I(i("COMMON.EMPTY"))})).catch((function(){return T(i("COMMON.ERROR"))})).finally((function(){return m(!1)})))}),[t,n,g,i,e.isLoading,e.group,e.month,e.year]);var ue=c.a.useCallback((function(e){return c.a.createElement(z.a,{className:r.list},f.filter((function(t){return t.type===e})).map((function(e,t){return c.a.createElement(c.a.Fragment,null,c.a.createElement(tt,{key:e.id,id:e.id,title:e.name,type:De.Menu,onEdit:te,onDelete:ne},c.a.createElement(Ie.a,{container:!0,direction:"row",justify:"space-around",alignItems:"center"},c.a.createElement(P.a,{startIcon:c.a.createElement(oa.a,null)},Object(la.a)(new Date(e.date),i("COMMON.DATE_FORMAT"))),c.a.createElement(P.a,{startIcon:c.a.createElement(ee.a,null)},e.label.name),c.a.createElement(P.a,{startIcon:c.a.createElement(ae.a,null)},e.value.toFixed(2)))))})))}),[i,f,r.list,te,ne]);return c.a.createElement("div",{key:"ExpensesComponent"},c.a.createElement($t,{loading:e.isLoading,groups:e.groups,years:e.years,group:e.group,month:e.month,year:e.year}),c.a.createElement(D.a,null),c.a.createElement(Ie.a,{container:!0,justify:"space-between",alignItems:"center",className:r.root,spacing:1},c.a.createElement(B.a,{variant:"h5",className:r.title},i("EXPENSES.LIST.TITLE")),c.a.createElement(P.a,{variant:"contained",color:"primary",startIcon:c.a.createElement(We.a,null),onClick:re,disabled:s||e.isLoading||!t},i("COMMON.ADD"))),c.a.createElement(Ie.a,{container:!0,justify:"flex-start",alignItems:"center",className:r.root,spacing:1},c.a.createElement(Fe,{showLoading:s||!t,error:S,info:x},c.a.createElement("div",{className:r.tabs},c.a.createElement(Mt.a,{className:r.tab},c.a.createElement(Lt.a,{value:Y,onChange:function(e,t){X(t)},centered:!0,variant:"fullWidth"},c.a.createElement(Rt.a,{label:i("COMMON.SUMMARY")}),c.a.createElement(Rt.a,{label:c.a.createElement(zt.a,{badgeContent:J(na.Incoming),color:"primary"},i("EXPENSES.INCOMING"))}),c.a.createElement(Rt.a,{label:c.a.createElement(zt.a,{badgeContent:J(na.Outcoming),color:"primary"},i("EXPENSES.OUTCOMING"))}))),c.a.createElement(aa,{value:Y,index:0},c.a.createElement(Ie.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"flex-start"},c.a.createElement(Ie.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center"},c.a.createElement(B.a,{variant:"body2",className:r.separatorTitle},i("EXPENSES.LIST.TOTAL_INCOMING")),c.a.createElement(B.a,{variant:"h6",className:r.separatorTitle},"".concat(q(na.Incoming)))),c.a.createElement(Ie.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center"},c.a.createElement(B.a,{variant:"body2",className:r.separatorTitle},i("EXPENSES.LIST.TOTAL_OUTCOMING")),c.a.createElement(B.a,{variant:"h6",className:r.separatorTitle},"".concat(q(na.Outcoming)))),c.a.createElement(D.a,null),c.a.createElement(Ie.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center"},c.a.createElement(B.a,{variant:"body2",className:r.separatorTitle},i("EXPENSES.LIST.TOTAL_LEFT")),c.a.createElement(Ot.a,{color:+Z>=0?"primary":"secondary",label:Z,className:r.separatorTitle}),c.a.createElement(Ot.a,{color:+Z>=0?"primary":"secondary",size:"small",label:"".concat($,"%")})))),c.a.createElement(aa,{value:Y,index:1},ue(na.Incoming)),c.a.createElement(aa,{value:Y,index:2},ue(na.Outcoming))))),c.a.createElement(ga,{expense:R,show:V,onAction:ce,onClose:le}))})),ya=a(506),Sa=a(484),Ta=a(485),ka=a(486),Aa=a(487);!function(e){e.LOGIN="LOGIN",e.REGISTER="REGISTER",e.RESET="RESET"}(ua||(ua={}));var Ca=Object(O.a)((function(e){return Object(g.a)({root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}}})}));function wa(e){return c.a.createElement(Me.a,Object.assign({elevation:6,variant:"filled"},e))}var xa=Object(r.memo)((function(e){var t=Ca(),a=Object(N.a)(),n=Object(d.a)(a,1)[0],l=Object(x.g)(),i=Object(r.useState)(),o=Object(d.a)(i,2),u=o[0],s=o[1],m=Object(r.useState)(""),p=Object(d.a)(m,2),E=p[0],f=p[1],b=Object(r.useState)(""),h=Object(d.a)(b,2),O=h[0],g=h[1],v=Object(r.useMemo)((function(){return e.type===ua.RESET?!oe(E):!(oe(E)&&oe(O))}),[E,O,e.type]),j=Object(r.useCallback)((function(e){f(e.target.value)}),[]),y=Object(r.useCallback)((function(e){g(e.target.value)}),[]),S=Object(r.useState)(!1),T=Object(d.a)(S,2),k=T[0],w=T[1],I=Object(r.useCallback)(Object(C.a)(A.a.mark((function t(){var a;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:w(!0),s(void 0),t.t0=e.type,t.next=t.t0===ua.LOGIN?5:t.t0===ua.REGISTER?7:t.t0===ua.RESET?9:11;break;case 5:return a=Se(E,O),t.abrupt("break",11);case 7:return a=Te(E,O),t.abrupt("break",11);case 9:return a=ke(E),t.abrupt("break",11);case 11:a.then((function(){setTimeout((function(){return l.push(Ce.home)}))})).catch((function(e){s(e.message)})).finally((function(){w(!1)}));case 12:case"end":return t.stop()}}),t)}))),[E,O,l,e.type]),L=Object(r.useMemo)((function(){return[n("AUTH.".concat(e.type,".TITLE")),n("AUTH.".concat(e.type,".BUTTON"))]}),[e.type,n]),M=Object(d.a)(L,2),R=M[0],U=M[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement(Sa.a,null,c.a.createElement(Ta.a,{title:R}),c.a.createElement(ka.a,null,oe(u)&&c.a.createElement(wa,{severity:"error"},u),c.a.createElement("form",{className:t.root,noValidate:!0,autoComplete:"off"},c.a.createElement(Ie.a,{container:!0},c.a.createElement(Ie.a,{container:!0,item:!0,xs:12},c.a.createElement(ya.a,{required:!0,id:"".concat(e.type,"-email-required"),label:n("AUTH.EMAIL"),disabled:k,value:E,onChange:j})),e.type!==ua.RESET&&c.a.createElement(Ie.a,{container:!0,item:!0,xs:12},c.a.createElement(ya.a,{required:!0,id:"".concat(e.type,"-password-required"),label:n("AUTH.PASSWORD"),type:"password",disabled:k,value:O,onChange:y}))))),c.a.createElement(Aa.a,null,c.a.createElement(P.a,{id:"".concat(e.type,"-action"),variant:"contained",color:"primary",size:"small",endIcon:k&&c.a.createElement(Le.a,{size:12}),disabled:k||v,onClick:I},U))))})),Na=a(133),Ia=a.n(Na),La=Object(r.memo)((function(){var e=Object(N.a)(),t=Object(d.a)(e,1)[0],a=Object(x.g)(),n=Object(r.useState)(!1),l=Object(d.a)(n,2),i=l[0],o=l[1],u=Object(r.useState)(!1),s=Object(d.a)(u,2),m=s[0],p=s[1],E=Object(r.useCallback)(Object(C.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),p(!1),e.prev=2,e.next=5,ye();case 5:setTimeout((function(){return a.push(Ce.home)})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),p(!0);case 11:return e.prev=11,o(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[2,8,11,14]])}))),[a]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(P.a,{variant:"contained",color:"primary",startIcon:c.a.createElement(Ia.a,null),onClick:E,endIcon:c.a.createElement(c.a.Fragment,null,i&&c.a.createElement(Le.a,{size:15}),m&&c.a.createElement(Et.a,{color:"secondary","data-testid":"facebook-close-icon"})),disabled:i},t("AUTH.FACEBOOK.BUTTON")))})),Ma=Object(O.a)((function(e){return Object(g.a)({root:{flexGrow:1},center:{textAlign:"center"}})})),Ra=Object(r.memo)((function(){var e=Ma();return c.a.createElement("div",{className:e.root},c.a.createElement(Ie.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-start",spacing:3},c.a.createElement(Ie.a,{item:!0,xs:12,className:e.center},c.a.createElement(La,null)),Object.values(ua).map((function(e){return c.a.createElement(Ie.a,{item:!0,xs:12,sm:6,md:4},c.a.createElement(xa,{type:e}))}))))})),Ua=a(488),Da=Object(O.a)((function(e){return{root:{flexGrow:1},formControl:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},avatar:{width:100,height:100}}})),Ga=c.a.memo((function(){var e,t,a,n,r=Da(),l=Object(N.a)(),i=Object(d.a)(l,1)[0],o=c.a.useContext(ie),u=c.a.useState(!1),s=Object(d.a)(u,2),m=s[0],p=s[1],E=c.a.useState(""),f=Object(d.a)(E,2),b=f[0],h=f[1],O=c.a.useState(""),g=Object(d.a)(O,2),v=g[0],j=g[1],y=c.a.useCallback((function(e){h(e.target.value)}),[]),S=c.a.useCallback((function(){p(!0),j(""),Ae(o.user,b).catch((function(){return j(i("COMMON.ERROR"))})).finally((function(){return p(!1)}))}),[b,o.user,i]),T=c.a.useCallback((function(){console.log(o.isDarkTheme,!o.isDarkTheme),o.setDarkTheme(!o.isDarkTheme)}),[o]);return c.a.useEffect((function(){var e,t;h(null!==(e=null===(t=o.user)||void 0===t?void 0:t.displayName)&&void 0!==e?e:"")}),[o.user]),c.a.createElement(c.a.Fragment,null,c.a.createElement(Fe,{showLoading:o.initialising||!o.isReady,error:v},c.a.createElement(Ie.a,{container:!0,justify:"center",alignItems:"center",className:r.root},c.a.createElement(zt.a,{badgeContent:c.a.createElement(Ia.a,null),anchorOrigin:{vertical:"bottom",horizontal:"right"}},c.a.createElement(I.a,{alt:null===(e=o.user)||void 0===e?void 0:e.displayName,src:(null===(t=o.user)||void 0===t?void 0:t.photoURL)+"?type=large",className:r.avatar},(null===(a=o.user)||void 0===a?void 0:a.displayName)[0])),c.a.createElement(at.a,{fullWidth:!0,className:r.formControl},c.a.createElement(nt.a,{htmlFor:"email"},i("SETTINGS.EMAIL")),c.a.createElement(ct.a,{required:!0,id:"email",value:null===(n=o.user)||void 0===n?void 0:n.email,disabled:!0})),c.a.createElement(at.a,{fullWidth:!0,className:r.formControl},c.a.createElement(nt.a,{htmlFor:"displayName",required:!0},i("SETTINGS.DISPLAY_NAME")),c.a.createElement(ct.a,{required:!0,id:"displayName",onChange:y,value:b})),c.a.createElement(fa.a,{control:c.a.createElement(Ua.a,{checked:o.isDarkTheme,onChange:T,name:"switch-dark-theme"}),label:i("SETTINGS.DARK_THEME")}),c.a.createElement(Ie.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center"},c.a.createElement(P.a,{variant:"contained",color:"primary",endIcon:m&&c.a.createElement(Le.a,{size:12}),disabled:m||!oe(b),onClick:S},i("SETTINGS.BUTTON"))))))})),Fa=c.a.memo((function(){var e=c.a.useContext(ie).isReady,t=Object(x.g)(),a=Object(x.h)(),n=c.a.useState(ve.get()),r=Object(d.a)(n,1)[0],l=c.a.useState([]),i=Object(d.a)(l,2),o=i[0],u=i[1],s=c.a.useState([(new Date).getFullYear()]),m=Object(d.a)(s,1)[0],p=c.a.useState([]),E=Object(d.a)(p,2),f=E[0],b=E[1],h=c.a.useState(),O=Object(d.a)(h,2),g=O[0],v=O[1],j=c.a.useState((new Date).getMonth()),y=Object(d.a)(j,2),S=y[0],T=y[1],k=c.a.useState((new Date).getFullYear()),w=Object(d.a)(k,2),N=w[0],I=w[1],L=c.a.useState(!1),M=Object(d.a)(L,2),R=M[0],U=M[1];return c.a.useEffect((function(){if(e){var n=JSON.stringify(Pe.a.parse(a.search)),c=JSON.parse(n);U(!0),function(){var e=Object(C.a)(A.a.mark((function e(){var n,l,i,s,m,p,E,d,f,h,O;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o.length>0)){e.next=4;break}i=o,e.next=13;break;case 4:return e.prev=4,e.next=7,new Ve(r).getAll();case 7:i=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),i=[];case 13:if(d=localStorage.getItem("group"),u(i),oe(c.group)&&i.some((function(e){return e.id===+c.group}))?m=i.find((function(e){return e.id===+c.group})):oe(d)&&i.some((function(e){return e.id===+d}))?m=i.find((function(e){return e.id===+d})):oe(i)&&(m=i[0]),m===g){e.next=27;break}return e.prev=17,e.next=20,new ea(r).getAll(null===(f=m)||void 0===f?void 0:f.id);case 20:s=e.sent,e.next=26;break;case 23:e.prev=23,e.t1=e.catch(17),s=[];case 26:b(s);case 27:v(m),localStorage.setItem("group",null===(n=m)||void 0===n?void 0:n.id.toString()),h=localStorage.getItem("month"),p=oe(c.month)&&c.month>=1&&c.month<=12?c.month:oe(h)&&+h>=1&&+h<=12?+h:(new Date).getMonth(),T(p),localStorage.setItem("month",p.toString()),O=localStorage.getItem("year"),E=oe(c.year)?c.year:oe(O)?+O:(new Date).getFullYear(),I(E),localStorage.setItem("year",E.toString()),t.push({pathname:a.pathname,search:Pe.a.stringify({group:null===(l=m)||void 0===l?void 0:l.id,month:p,year:E})}),U(!1);case 39:case"end":return e.stop()}}),e,null,[[4,10],[17,23]])})));return function(){return e.apply(this,arguments)}}()()}}),[r,a.search,e]),c.a.createElement(c.a.Fragment,null,c.a.createElement(wt.Provider,{value:{isLoading:R,groups:o,labels:f,years:m,group:g,month:S,year:N}},c.a.createElement(x.d,null,c.a.createElement(_e,{key:Ce.groups,path:Ce.groups,component:Ct}),c.a.createElement(_e,{key:Ce.labels,path:Ce.labels,component:ca}),c.a.createElement(_e,{key:Ce.expenses,path:Ce.expenses,component:ja}),c.a.createElement(_e,{key:Ce.settings,path:Ce.settings,component:Ga}),c.a.createElement(x.b,{key:Ce.auth,path:Ce.auth,component:Ra}),c.a.createElement(x.b,{key:Ce.home,exact:!0,path:Ce.home},c.a.createElement(c.a.Fragment,null,c.a.createElement(B.a,{variant:"h3"},"HOME"),c.a.createElement(B.a,{variant:"h6"},"Build Version: ",r.buildVersion))),c.a.createElement(x.b,{key:"*",path:"*"},c.a.createElement("h1",null," 404 ")))))})),Ba=Object(O.a)((function(e){return Object(g.a)({container:{flexGrow:1,marginTop:10}})})),Pa=c.a.memo((function(){var e=Object(S.a)("(prefers-color-scheme: dark)"),t=Ba(),a=c.a.useState(ve.get()),n=Object(d.a)(a,1)[0],l=function(){var e=Object(r.useState)((function(){var e=Object(o.auth)().currentUser;return{initialising:!e,user:e}})),t=Object(d.a)(e,2),a=t[0],n=t[1],l=function(e){n({initialising:!1,user:e})};return c.a.useEffect((function(){var e=u.a.auth().onAuthStateChanged(l);return function(){return e()}}),[]),a}(),i=l.user,s=l.initialising,m=c.a.useState(!1),p=Object(d.a)(m,2),E=p[0],b=p[1],O=c.a.useState(),g=Object(d.a)(O,2),k=g[0],A=g[1],C=c.a.useCallback((function(e){console.log(k,!k),A(e)}),[k]);c.a.useEffect((function(){!s&&i&&oe(i)&&i.getIdTokenResult().then((function(e){h.a.defaults.headers.common.Authorization=e.token,new be(n).addOrUpdate({id:i.uid,email:i.email,displayName:i.displayName,photoUrl:i.photoURL}),b(!0)}))}),[i,s,n]);var w=c.a.useMemo((function(){var t=e;return oe(localStorage.getItem("darkTheme"))&&(console.log("localStorage ",oe(localStorage.getItem("darkTheme"))),t=JSON.parse(localStorage.getItem("darkTheme")),A(t)),oe(k)&&k!==t&&(A(t=k),localStorage.setItem("darkTheme",t.toString())),Object(v.a)({palette:{type:t?"dark":"light"},typography:{button:{textTransform:"none"}}})}),[e,k]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(j.a,{theme:w},c.a.createElement(y.a,null),c.a.createElement(ie.Provider,{value:{user:i,initialising:s,isReady:E,isDarkTheme:null!==k&&void 0!==k?k:e,setDarkTheme:C}},c.a.createElement(f.a,{basename:null!=="/myexpenses-ui"?"/myexpenses-ui":void 0},c.a.createElement(Ne,null),c.a.createElement(T.a,{key:"MainContainer",maxWidth:"md",className:t.container},c.a.createElement(Fe,{showLoading:s},c.a.createElement(Fa,null)))))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Va;!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new he;t=Object(n.a)(Object(n.a)({},t),{},{buildVersion:ue("47",e.buildVersion,t.buildVersion),apiUrl:ue("https://myexpenses-backend-dev.herokuapp.com",e.apiUrl,t.apiUrl)}),ve.set(Object(n.a)(Object(n.a)({},t),e))}(),Object(o.initializeApp)(Object(n.a)({},{apiKey:"AIzaSyAVfjm2M_d7mmVbD4kOwVWxp57CQZV8jqQ",authDomain:"".concat(Va="myexpenses-6e402",".firebaseapp.com"),databaseURL:"https://".concat(Va,".firebaseio.com"),projectId:Va,storageBucket:Va,messagingSenderId:"my-sender-id"})),i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(Pa,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[252,1,2]]]);
//# sourceMappingURL=main.eb776493.chunk.js.map